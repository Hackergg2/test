<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Кликер на сайте</title>
</head>
<body>
<h1>Кликер из браузера</h1>
<p>Клики: <span id="clicks">0</span></p>
<button id="click-btn">Кликни меня!</button>

<script>
const userId = prompt("Введите свой user_id (Telegram ID) для теста:");

const API_URL = 'https://your-pella-domain.com:5000'; // Заменить на URL Pella с API

const clicksSpan = document.getElementById('clicks');
const btn = document.getElementById('click-btn');

async function updateClicks() {
  try {
    const res = await fetch(`${API_URL}/get_clicks?user_id=${userId}`);
    const data = await res.json();
    clicksSpan.textContent = data.clicks || 0;
  } catch (e) {
    console.error('Ошибка получения кликов', e);
  }
}

btn.addEventListener('click', async () => {
  try {
    const res = await fetch(`${API_URL}/increment_clicks`, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({user_id: userId})
    });
    const data = await res.json();
    clicksSpan.textContent = data.clicks;
  } catch (e) {
    console.error('Ошибка клика', e);
  }
});

updateClicks();
</script>
</body>
</html>
